<!-- Code inserted in the Header of VILT Course Series -->
<section id="vilt-section">

    <!-- header for title and filter controls -->
    <div id="vilt-header">

        <div class="header-block-wrapper">
            <div id="header-block">

                <div class="header-block-text">
                    <h1 class="section-header">Join A Virtual Class</h1>
                    <p>
                        All virtual classes are led by our in-house Nintex instructors with deep product knowledge and
                        experience. Select a class below based on available times and the product you want to learn
                        about.
                        After registering for the class, you may then select the session time that works best for you.
                    </p>
                </div>
                <!-- background image on banner -->
                <div class="header-block-graphic"></div>

            </div>
        </div>

    </div>

    <!-- loader animation removed when cards render -->
    <div id="events-loader">
        <h3 class="text-center">Fetching available classes...</h3>
        <div class="loader-small"></div>
    </div>

    <!-- filter controls -->
    <div id="filters-row" hidden>
        <!-- calendar view -->
        <a href="http://learn.nintex.com/calendar" target="_blank" class="filter-control">
            <span>
                Calendar View
            </span>
        </a>

        <!-- select filter -->
        <select name="capability" id="filter-select" class="filter-control">
            <!-- values should match tag names of capabilities -->
            <option selected value="all">All Products</option>
            <option value="workflow">Workflow</option>
            <option value="forms">Forms</option>
            <option value="process mapping">Process Mapping</option>
            <option value="docgen">DocGen</option>
            <option value="rpa">RPA</option>
        </select>

        <!-- search filter -->
        <input type="text" id="filter-search" class="filter-control" placeholder="Search class names">

        <!-- filters reset -->
        <a href="#" id="filter-reset" class="link-text">
            <span class="link-icon">&#10005;</span> Reset filters
        </a>
    </div>

    <!-- container for all VILT event cards -->
    <div id="vilt-events" hidden>

        <!-- template for a VILT event card - real cards rendered with JS -->
        <div class="card-wide card-container" hidden>
            <div class="img-container">
                <img class="event-img"
                    src="https://everpath-course-content.s3-accelerate.amazonaws.com/instructor%2Fhan_xu_nintex_com_9jmvc3%2Fpublic%2Fnintexu-vILT.1576697456192.jpg"
                    alt="event image">
            </div>
            <!-- event card -->
            <div class="card-wide-content">
                <!-- event title and subtitle -->
                <h4 class="card-wide-title">
                    Some main title for the course
                </h4>

                <!-- available times -->
                <div class="event-times-container">
                    <h6>
                        Available times:
                        <!-- status badges -->
                        <span class="badge badge-register" hidden>Registered</span>
                        <span class="badge badge-success" hidden>Completed</span>
                    </h6>
                    <div class="event-times">
                        <div class="pill-outline" hidden>
                            <p class="pill-text pill-date">Nov 26, 2019</p>
                            <p class="pill-text pill-time">09:00</p>
                        </div>
                    </div>
                </div>

                <!-- third row for information (price, level, etc.) -->
                <div class="card-info-row">
                    <p class="card-wide-subtitle">
                        Some kind of subtitle explaining the goal of this course
                    </p>

                    <!-- difficulty/level -->
                    <div class="level-blocks">
                        <!-- correct shade class (.block-fill) is added based on level -->
                        <span class="block-text">Difficulty</span>
                        <span class="level-block-small"> &nbsp; </span>
                        <span class="level-block-small"> &nbsp; </span>
                        <span class="level-block-small"> &nbsp; </span>
                    </div>
                </div>

            </div>
        </div>

    </div>

</section>

<!-- STYLES -->
<style>
 /* page reset */
 #main-container #skilljar-content {
        margin-left: 0;
    }

    #main-container #skilljar-content .top-row {
        padding: 0;
    }

    #main-container #skilljar-content .catalog-header {
        margin-top: 0;
        padding-left: 0;
    }

    /* hide left nav button - search bar does not work on this page */
    #left-nav-button {
        display: none;
    }

    /* header title and paragraph */
    #main-container #vilt-section h1.section-header {
        font-family: "Montserrat";
        font-weight: 400;
        font-size: 2em;
        margin: 1.5em 0 1em 0;
        color: #fff;
    }

    #main-container #vilt-section .header-block-wrapper {
        background-color: #052332;
    }

    #main-container #vilt-section #header-block {
        color: #052332;
        margin: auto;
        margin-bottom: 3em;
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        -webkit-box-pack: center;
            -ms-flex-pack: center;
                justify-content: center;
        -webkit-box-orient: horizontal;
        -webkit-box-direction: normal;
            -ms-flex-flow: row nowrap;
                flex-flow: row nowrap;
        max-width: 70%;
    }

    #main-container #vilt-section #header-block p {
        font-size: 1.1em;
        font-weight: 300;
        margin-bottom: 2.5em;
    }

    #vilt-section #header-block .header-block-text {
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        -webkit-box-orient: vertical;
        -webkit-box-direction: normal;
            -ms-flex-flow: column nowrap;
                flex-flow: column nowrap;
        margin: 2.5em 4em 2em 0;
        color: white;
        letter-spacing: .03em;
    }

    #header-block .header-block-text .btn-outline {
        margin: auto;
    }

    #header-block .header-block-text .btn-outline:hover {
        background-color: #ff6d00;
    }

    .header-block-text .btn-outline a {
        color: #fff;
    }

    #vilt-section #header-block .header-block-graphic {
        width: 100em;
        background: url("https://everpath-course-content.s3-accelerate.amazonaws.com/instructor%2Fhan_xu_nintex_com_9jmvc3%2Fpublic%2Fvilt-banner-image2.1580326513120.jpg");
        background-size: cover;
        background-position: center;
    }

    @media only screen and (max-width: 1150px) {
        #vilt-section #header-block .header-block-graphic {
            display: none;
        }

        #vilt-section #header-block .header-block-text {
            margin: 2.5em 0;
        }
    }


    /* filter controls */
    #filters-row {
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        -webkit-box-orient: horizontal;
        -webkit-box-direction: normal;
            -ms-flex-flow: row wrap;
                flex-flow: row wrap;
        -webkit-box-pack: center;
            -ms-flex-pack: center;
                justify-content: flex-start;
        max-width: 70%;
        margin: 2em auto;
    }

    @media only screen and (max-width: 1150) {
        #filters-row {
            -webkit-box-orient: vertical;
            -webkit-box-direction: normal;
                -ms-flex-flow: column nowrap;
                    flex-flow: column nowrap;
            -webkit-box-align: center;
                -ms-flex-align: center;
                    align-items: center;
        }

        #filters-row .filter-control {
            margin-bottom: 1em;
        }
    }

    /* each control/filter button */
    #filters-row .filter-control {
        width: 12em;
        height: 2.4em;
        font-size: inherit;
        background-color: #fff;
        color: #5f5f5f;
        border-radius: 5px;
        padding: 4px;
        border: 1.4px solid #c0c0c0;
        outline: none;
        margin: 0 2em 1em 0;
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        -webkit-box-pack: center;
            -ms-flex-pack: center;
                justify-content: center;
        -webkit-box-align: center;
            -ms-flex-align: center;
                align-items: center;
        -webkit-transition: all .3s ease;
        -o-transition: all .3s ease;
        transition: all .3s ease;
    }
    #filters-row a.filter-control:hover {
        background: #ff6d00;
        color: white;
    }
    /* remove left margin on leftmost filter control */
    #vilt-section #filters-row:first-child {
        margin-left: 0;
    }

    /* longer width for search filter */
    #filter-search.filter-control {
        width: 17em;
    }

    #filters-row select.filter-control {
        cursor: pointer;
    }

    #filters-row input.filter-control {
        text-indent: 4px;
    }

    #filters-row .link-text {
        margin-bottom: 1em;
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        -webkit-box-align: center;
            -ms-flex-align: center;
                align-items: center;
        color: #5f5f5f;
    }

    .link-text:hover .link-icon {
        -webkit-transform: rotate(90deg);
            -ms-transform: rotate(90deg);
                transform: rotate(90deg);
    }

    /* icon inside link */
    #filters-row .link-text .link-icon {
        font-size: 1.1em;
        margin-right: .5em;
        margin-top: 1px;
        -webkit-transition: .4s ease;
        -o-transition: .4s ease;
        transition: .4s ease;
    }

    /* EVENTS SECTION */
    #main-container #skilljar-content #vilt-events {
        width: 70%;
        margin: auto;
    }
    /* less whitespace for small devices */
    @media only screen and (max-width: 500px) {
        #main-container #skilljar-content #vilt-events {
            width: 86%;
        }
    }

    /* custom loader */
    #vilt-section #events-loader {
        margin-top: 3em;
    }

    .loader-small {
        margin: 0 auto;
        border: 16px solid #d8d7d7;
        border-radius: 50%;
        border-top: 16px solid #052332;
        width: 120px;
        height: 120px;
        -webkit-animation: spin 2s linear infinite;
        /* Safari */
        animation: spin 2s linear infinite;
    }

    /* Safari */
    @-webkit-keyframes spin {
        0% {
            -webkit-transform: rotate(0deg);
        }

        100% {
            -webkit-transform: rotate(360deg);
        }
    }

    @keyframes spin {
        0% {
            -webkit-transform: rotate(0deg);
                    transform: rotate(0deg);
        }

        100% {
            -webkit-transform: rotate(360deg);
                    transform: rotate(360deg);
        }
    }

    /* event cards */
    #vilt-section #vilt-events .card-wide {
        border: 1px solid #c0c0c0;
        background-color: #fff;
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        margin: 2em auto;
        cursor: pointer;
        -webkit-transition: all .3s ease;
        -o-transition: all .3s ease;
        transition: all .3s ease;
        border-radius: 3px;
        border-width: .5px;
    }
    #vilt-section #vilt-events .card-wide:hover {
        background-color: #eaf0f1;
        -webkit-box-shadow: 0px 4px 12px -5px rgba(46, 61, 73, 0.5);
                box-shadow: 0px 4px 12px -5px rgba(46, 61, 73, 0.5);
    }

    /* card image */
    #vilt-section #vilt-events .img-container {
        overflow: hidden;
        width: 17em;
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        -webkit-box-pack: center;
            -ms-flex-pack: center;
                justify-content: center;
        -webkit-box-align: center;
            -ms-flex-align: center;
                align-items: center;
    }

    #vilt-section #vilt-events .card-wide img {
        max-width: initial;  /* reset skilljar default */
        height: 11em;
        max-height: 15em;
        -webkit-transform: scale(1.3);
        -ms-transform: scale(1.3);
        transform: scale(1.3);
    }

    @media only screen and (max-width: 1150px) {
        
        #vilt-section #vilt-events .img-container {
            display: none;
        }

        #vilt-section #vilt-events .card-wide {
            text-align: center;
        }
    }

    /* content inside each card */
    #vilt-section #vilt-events .card-wide .card-wide-content {
        width: 100%;
        margin: 0 1em;
        padding: .9em;
        color: #052332;
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        -webkit-box-orient: vertical;
        -webkit-box-direction: normal;
            -ms-flex-flow: column;
                flex-flow: column;
        -webkit-box-pack: justify;
            -ms-flex-pack: justify;
                justify-content: space-between;
        -webkit-box-align: start;
            -ms-flex-align: start;
                align-items: flex-start;
    }

    .card-wide-content .card-info-row {
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        -webkit-box-pack: start;
            -ms-flex-pack: start;
                justify-content: flex-start;
    }

    .card-wide-content .card-wide-title {
        margin-bottom: 0;
        margin-top: .4em;
        font-family: "Montserrat";
        font-size: 1.1em;
        font-weight: 600;
        color: #052332;
    }

    .card-wide-content .card-wide-subtitle {
        color: #052332;
        font-weight: 600;
        margin: 0 .5em .5em 0;
    }
    /* add | after price */
    p.card-wide-subtitle::after {
        content: '|';
        font-size: 1.1em;
        margin-left: .5em;
        font-weight: 400;
    }

    #vilt-events .event-times-container {
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        -webkit-box-orient: vertical;
        -webkit-box-direction: normal;
            -ms-flex-flow: column wrap;
                flex-flow: column wrap;
        margin-bottom: .5em;
        margin-top: .5em;
    }

    .event-times-container .event-times {
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        -webkit-box-orient: horizontal;
        -webkit-box-direction: normal;
            -ms-flex-flow: row wrap;
                flex-flow: row wrap;
    }


    /* event levels */
    .level-blocks {
        width: -webkit-fit-content;
        width: -moz-fit-content;
        width: fit-content;
        height: 1em;
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        margin-top: .4em;
    }

    .block-text {
        margin-right: .5em;
        color: inherit;
    }

    .level-block-small {
        width: 1em;
        height: 1em;
        margin-right: .25em;
        background-color: #ccc;
        border-radius: 10px;
    }

    .block-fill {
        background-color: #ff6d00;
    }


    /* progress status badges */
    #vilt-events .badge {
        padding: 4px 15px;
        font-size: .8em;
        font-weight: 700;
        position: absolute;
        right: 0;
        bottom: 0;
        letter-spacing: 1px;
    }
    .badge-register {
        background-color: #ffc693;
    }
    .badge-success {
        background-color: #DCF3E7;
    }

    #vilt-events .event-times-container .event-times .pill-outline {
        display: inline-block;
        padding: 0 5px;
        margin: 0 0 .5em 1.7em;
        font-size: 0.79em;
        letter-spacing: .05em;
    }

    #vilt-events .event-times-container .event-times .pill-outline .pill-text {
        text-align: center;
        display: inline;
    }
    /* separate date and time with | */
    p.pill-text.pill-date::after {
        content: ' -';
    }
</style>


<!-- MINOR DOM EDITS/RESETS - CUSTOMIZE ON ALL SUBPAGES -->
<script>
    // remove all search elements and reset searchbar
    document.querySelector('.search-container').remove();
    document.getElementById('filters-row').style.display = "none";

    // add breadcrumbs for this page
    document.addEventListener('DOMContentLoaded', () => {
        addBreadcrumbs([
            ["Instructor-led Training", "/series/vilt"]
        ]);
    });

    
</script>


<!-- DOM RENDERING OF VILT SESSION -->
<script>

    // MAIN RENDERING PROGRAM
    if (location.pathname == "/series/vilt") {

        const baseUrl = "https://skilljar-api-test.azurewebsites.net";
        const domain = "learn.nintex.com";  // change domain to location.host
        const user = getUser();  // user skilljar object

        // render live events into view
        callEventsData(baseUrl, domain)
            .then(events => renderVilt(events))
            .then(() => {
                // add user progress to view if user is logged in
                if (user)
                    callUserData(baseUrl, domain, user.id)
                        .then(records => showUserProgress(records))
            })
            .catch((err) => console.log(err));

    }
    // END MAIN


    // API CALLS

    // returns the user Skilljar object if logged in, or null otherwise
    function getUser() {
        let user = null;
        try {
            user = skilljarUser;
        } catch (error) {
            console.log("user needs to sign in to see skilljar data.")
        }
        return user;
    }

    // generic fetch function
    async function getData(url) {
        const response = await fetch(url, {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json'
            }
        });
        return await response.json();
    }

    // fetch user data with id from Skilljar API
    async function callUserData(baseUrl, domain, userId) {
        try {
            return await getData(`${baseUrl}/users/${userId}/${domain}`)
                .then(res => res.data)
                .catch(err => console.log(err));
        } catch (error) {
            console.log(`Error getting data from api: ${error}`);
        }
    }

    // fetch events data by unique course
    async function callEventsData(baseUrl, domain) {
        try {
            return await getData(`${baseUrl}/events/${domain}?unique_view=True`)
                .then(res => {
                    return res.data;
                    })
                .catch(err => console.log(err));
        } catch (error) {
            console.log(`Error getting data from api: ${error}`);
        }
    }


    // DYNAMIC RENDERING OF EVENTS

    // renders all VILT event cards with data from API
    function renderVilt(events) {
        // remove loader animation and empty top row
        document.getElementById('events-loader').remove();
        document.querySelector('.top-row').style.height = 0;

        // attach template to #skilljar-content section
        const vilt = document.getElementById("vilt-section");
        const content = document.getElementById("skilljar-content");
        content.appendChild(vilt);

        // template elements
        const viltCard = document.querySelector('.card-wide');
        const viltEvents = document.getElementById('vilt-events');

        // for each event copy viltCard template and fill with ev data
        events.forEach(ev => renderEvent(ev, viltCard, viltEvents));

        // unhide real elements and hide template card
        viltEvents.hidden = false;
        document.getElementById("filters-row").style.display = "flex";
        // removes class with display:flex which enables hidden on template
        viltCard.remove();
    }

    // renders a single event card to the vilt-events section
    // ev: event data, viltCard: card template, viltEvents: DOM section
    function renderEvent(ev, viltCard, viltEvents) {
        // copy template card and get its child elements
        const card = viltCard.cloneNode(true);
        const title = card.querySelector(".card-wide-title");
        const subtitle = card.querySelector(".card-wide-subtitle");
        const image = card.querySelector(".event-img");

        // get tags from event data (for filtering and rendering)
        const productTag = getEventCapability(ev);
        const levelTag = getEventLevel(ev);
        const platformTag = getEventPlatform(ev);

        // set data attributes
        card.dataset.product = productTag;  // product tag
        card.dataset.level =  levelTag; // level tag
        card.dataset.platform = platformTag; // platform tag
        card.dataset.id = ev.vilt_session.lesson.course.id  // course id

        // populate text and image with API data
        title.innerText = ev.vilt_session.lesson.course.title;
        subtitle.innerText = ev.short_description;
        // image depends on product and platform
        image.src = getImageUrl(productTag); 

        renderEventTime(ev, card);
        renderLevel(card);

        // add link to card and append card to vilt-events
        const url = ev.vilt_session.lesson.course.course_url;
        card.addEventListener('click', () => window.open(url));
        viltEvents.appendChild(card);
    }

    // returns the product capability tag found in the event data
    function getEventCapability(event) {
        const capabilities = [
            "Workflow", "Forms", "Process Mapping", "RPA", "DocGen", "eSign"
        ]

        for (capa of capabilities)
            if (event.tags.includes(capa)) return capa;
        return null;
    }

    // returns the level tag found in the event data
    function getEventLevel(event) {
        const levels = ["Practitioner", "Expert", "Master"];

        for (level of levels)
            if (event.tags.includes(level)) return level;
        return null;
    }

    // returns the platform tag found in the event data
    function getEventPlatform(event) {
        const platforms = ["Office 365", "SharePoint", "NWC"];

        for (platform of platforms)
            if (event.tags.includes(platform)) return platform;
        return null;
    }

    // returns the image URL based on product capability
    function getImageUrl(product) {

        // images stored in Skilljar Image Respository course series
        imageUrls = {
  
            "docgen": "https://everpath-course-content.s3-accelerate.amazonaws.com/instructor%2Fhan_xu_nintex_com_9jmvc3%2Fpublic%2Fdocument_automation.1582848734039.png",

            "esign": "https://everpath-course-content.s3-accelerate.amazonaws.com/instructor%2Fhan_xu_nintex_com_9jmvc3%2Fpublic%2Fmobile-esign.1584643326811.jpg",

            "forms": "https://everpath-course-content.s3-accelerate.amazonaws.com/instructor%2Fhan_xu_nintex_com_9jmvc3%2Fpublic%2Fforms_drawing.1584644083793.jpg",

            "mobile": "https://everpath-course-content.s3-accelerate.amazonaws.com/instructor%2Fhan_xu_nintex_com_9jmvc3%2Fpublic%2Fholding-phone-laptop.1584644268414.jpg",

            "workflow": "https://everpath-course-content.s3-accelerate.amazonaws.com/instructor%2Fhan_xu_nintex_com_9jmvc3%2Fpublic%2Fondemand-process_automation.1582574671330.jpg",

            "process mapping": "https://everpath-course-content.s3-accelerate.amazonaws.com/instructor%2Fhan_xu_nintex_com_9jmvc3%2Fpublic%2FstickyNote_whiteboard.1582758125621.jpg",

            "rpa": "https://everpath-course-content.s3-accelerate.amazonaws.com/instructor%2Fhan_xu_nintex_com_9jmvc3%2Fpublic%2Fbrowser_charts_typing.1584644432070.jpg",

            "default": "https://everpath-course-content.s3-accelerate.amazonaws.com/instructor%2Fhan_xu_nintex_com_9jmvc3%2Fpublic%2Flaptop-typing.1584644505690.jpg"
        }

        // returns image url for product if tag can be matched
        if (product && imageUrls[product.toLowerCase()]) {
            return imageUrls[product.toLowerCase()];
        } // else return default image url
        return imageUrls["default"];
    }       

    // renders the level blocks of given card based on difficulty
    function renderLevel(card) {
        // get all level blocks
        const blocks = card.querySelectorAll('.level-block-small');
        const level = card.dataset.level;

        const levels = { // levels assigned to number of blocks to be filled
            "Practitioner": 1,
            "Expert": 2,
            "Master": 3
        }

        // fill all blocks up to the card level
        for (i = 0; i < levels[level]; i++) {
            blocks[i].classList.add('block-fill');
        }

        // change difficulty text
        card.querySelector('.block-text').innerText = level;
    }

    // renders an event datetime pill within a given card
    function renderEventTime(event, card) {
        // render each event start time + date in local time
        const viltPill = card.querySelector(".pill-outline");
        event.starts_at.forEach(eventTime => {
            if (eventTime.seats <= 0) return; // skip if no available seats

            const dateTime = new Date(eventTime.time);
            // format as Nov 26, 2019
            let localDate = dateTime.toDateString().slice(4);
            localDate = localDate.substring(0, 6) + ', ' + localDate.substring(7);
            // format time as 13:00
            let localTime = dateTime.toTimeString().slice(0, 5);

            // datetime pill is cloned and populated for each start time

            const dtPill = viltPill.cloneNode(true);
            dtPill.querySelector(".pill-date").innerText = localDate;
            dtPill.querySelector(".pill-time").innerText = localTime;

            // pill added to times section
            card.querySelector(".event-times").append(dtPill);
        });
        viltPill.style.display = "none";
    }

    // unhides a registered/completed progress pill on applicable event cards
    function showUserProgress(records) {

        // get all rendered VILT cards
        const viltCards = document.getElementById('vilt-events').children;

        // iterate through all user records to show progress if needed
        for (record of records) {
            for (card of viltCards) {
                showProgress(card, record);
            }
        }
    }

    // unhides a single progress pill based on matching course id
    function showProgress(card, record) {
        // get pills
        const registerBadge = card.querySelector('.badge-register');
        const successBadge = card.querySelector('.badge-success');

        // check record course id against rendered card course id
        if (card.dataset.id == record.course.id) {
            if (record.course_progress.completed_at)
                successBadge.hidden = false;  // completed
            else
                registerBadge.hidden = false  // registered
        }
    }

</script>


<!-- FILTER AND SEARCH -->
<script>
    // event listeners for filter controls
    const filterSelect = document.getElementById('filter-select');
    const filterSearch = document.getElementById('filter-search');
    const resetBtn = document.getElementById('filter-reset');

    filterSelect.addEventListener('change', handleViltFilters);
    filterSearch.addEventListener('change', handleViltFilters);
    resetBtn.addEventListener('click', handleFilterReset);

    // resets view by displaying all possible VILT event cards
    function displayVilt() {
        const viltCards = document.querySelectorAll('.card-wide');
        for (card of viltCards) card.style.display = 'flex';
    }

    // handles all VILT filters on all cards
    function handleViltFilters(e) {
        displayVilt();  // reset view
        // pass cards through all filters
        const viltCards = document.querySelectorAll('.card-wide');
        handleViltSelect(viltCards);
        handleViltSearch(viltCards);
    }

    // filters and returns VILT cards by capability selection
    function handleViltSelect(viltCards) {
        const select = document.getElementById('filter-select').value.toLowerCase();

        // filter by capability stored on product data of each card
        for (card of viltCards) {
            const productTag = card.dataset.product.toLowerCase();
            if (productTag != select && select != "all") {
                card.style.display = "none";
            }
        }
        return viltCards;
    }

    // filters and returns VILT cards by name search
    function handleViltSearch(viltCards) {
        const input = document.getElementById('filter-search').value.toLowerCase();

        // filter by name given in search input
        for (card of viltCards) {
            const name = card.lastElementChild.firstElementChild.innerText;
            if (!name.toLowerCase().includes(input)) {
                card.style.display = "none";
            }
        }
        return viltCards
    }

    // displays all VILT cards and resets filter controls
    function handleFilterReset() {
        displayVilt();

        const filterSelect = document.getElementById('filter-select');
        const filterSearch = document.getElementById('filter-search');
        filterSelect.value = 'all';
        filterSearch.value = '';
    }

</script>
