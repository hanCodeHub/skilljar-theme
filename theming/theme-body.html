<!-- Google Tag Manager (noscript) -->
<noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TFHWFX" height="0" width="0"
        style="display:none;visibility:hidden"></iframe>
</noscript>
<!-- End Google Tag Manager (noscript) -->


<!-- TEMPLATES TO BE CLONED AND RENDERED -->

<!-- NAV BLOCK - attaches to #header - for breadcrumbs and links in subpages -->
<nav id="nav-section" hidden>
    <div id="navbar">
        <!-- subpages must implement additional breadcrumbs -->
        <div id="breadcrumbs">
            <!-- change link addresses for each domain -->
            <a href="https://nintex.skilljar.com">Home</a>
        </div>
        <div id="nav-links">
            <a href="https://nintex.skilljar.com/series/ondemand">On-demand Training</a>
            <a href="https://nintex.skilljar.com/series/vilt">Instructor-led Training</a>
            <a href="https://nintex.skilljar.com/series/certifications">Certification Exams</a>
        </div>

    </div>
</nav>

<!-- MAIN OFFERINGS BLOCK -->
<header id="offerings" hidden>
    <h1 class="section-header text-center">Choose a training offering that's right for you</h1>
    <!-- offering card elements supplied by Skilljar course series -->
</header>

<!-- LIVE AND PRIVATE TRAINING BLOCK -->
<section id="live-training" class="catalog-center-width section-body-dark" hidden>
    <div id="live-training-header" class="row catalog-center-width">
        <h1 class="section-header text-center">Reserve a seat in an upcoming live training event</h1>
        <span class="text-center btn-outline">
            <a href="http://nintex.skilljar.com/calendar" target="_blank">
                view calendar
            </a>
        </span>
    </div>
    <div id="live-training-body" class="row catalog-center-width text-center">

        <div id="events-table-section" class="text-center">
            <!-- show loader before events data is retrieved -->
            <div id="events-loader" class="loader">Loading...</div>
            <!-- loader removed and table shown after data populated -->
            <table id="events-table" hidden>

                <tr class="events-table-row">
                    <td></td>
                    <td></td>
                    <td class="events-course-name"></td>
                    <td></td>
                    <td></td>
                </tr>

                <tr class="events-table-row">
                    <td></td>
                    <td></td>
                    <td class="events-course-name"></td>
                    <td></td>
                    <td></td>
                </tr>

                <tr class="events-table-row">
                    <td></td>
                    <td></td>
                    <td class="events-course-name"></td>
                    <td></td>
                    <td></td>
                </tr>

                <tr class="events-table-row">
                    <td></td>
                    <td></td>
                    <td class="events-course-name"></td>
                    <td></td>
                    <td></td>
                </tr>

            </table>
        </div>

        <div id="private-training-section" class="text-center" hidden>
            <div class="card-container">
                <a id="private-training-link"
                    href="https://ntx-it-test.workflowcloud.com/forms/f827be1d-4f6c-44d3-b678-88d29317a514"
                    target="_blank">
                    <div class="card-message">
                        <p>Contact us for private training</p>
                    </div>
                    <img src="https://everpath-course-content.s3-accelerate.amazonaws.com/instructor%2Fhan_xu_nintex_com_9jmvc3%2Fpublic%2FCorporate-compliance_3.1573758844914.jpg"
                        class="card-image" alt="private training image">
                    <span class="card-message-overlay">
                        <h3>Request Form</h3>
                        <img src="https://everpath-course-content.s3-accelerate.amazonaws.com/instructor%2Fhan_xu_nintex_com_9jmvc3%2Fpublic%2Fform-icon.1573795608614.png"
                            class="card-icon" alt="form icon image">
                    </span>
                </a>
            </div>
        </div>

    </div>
</section>


<!-- RESOURCES BLOCK -->
<section id="resources" class="catalog-center-width section-body-light" hidden>
    <div id="resources-header" class="row catalog-center-width">
        <h1 class="section-header text-center">Take advantage of additional resources</h1>
    </div>
    <div class="tile-row">
        <div class="image-link-container">
            <img src="https://everpath-course-content.s3-accelerate.amazonaws.com/instructor%2Fhan_xu_nintex_com_9jmvc3%2Fpublic%2Fplay-icon.1574190756692.png"
                id="how-to-icon" class="image-link-icon" alt="how-to videos icon">
            <span class="text-center btn-outline outline-dark">
                <a href="https://www.youtube.com/user/Nintex" target="_blank">
                    How-to Videos
                </a>
            </span>
        </div>
        <div class="image-link-container">
            <img src="https://everpath-course-content.s3-accelerate.amazonaws.com/instructor%2Fhan_xu_nintex_com_9jmvc3%2Fpublic%2Fcommunity-icon.1574190793235.png"
                id="community-icon" class="image-link-icon" alt="community icon">
            <span class="text-center btn-outline outline-dark">
                <a href="https://community.nintex.com/" target="_blank">
                    Community Forums
                </a>
            </span>
        </div>
        <div class="image-link-container">
            <img src="https://everpath-course-content.s3-accelerate.amazonaws.com/instructor%2Fhan_xu_nintex_com_9jmvc3%2Fpublic%2Fhelp-docs-icon.1574190820917.png"
                id="helpdoc-icon" class="image-link-icon" alt="help documentation icon">
            <span class="text-center btn-outline outline-dark">
                <a href="https://help.nintex.com/" target="_blank">
                    Product Documentation
                </a>
            </span>
        </div>
    </div>

</section>



<!-- ADDING NEW BLOCKS -->
<script>
    // CUSTOM BLOCKS - only add to homepage
    if (location.pathname === '/') {
        // Existing blocks
        const catalog = document.querySelector('#catalog-content');
        const courses = document.querySelector('#catalog-courses');
        const topRow = document.querySelector('.top-row');
        const header = document.getElementById('#header');

        // New blocks
        const offerings = document.querySelector('#offerings');
        const liveTraining = document.querySelector('#live-training');
        const resources = document.querySelector('#resources');

        // make new blocks visible only on homepage
        for (section of [offerings, liveTraining, resources])
            section.removeAttribute('hidden');

        // Insert new blocks
        catalog.insertBefore(offerings, courses);
        topRow.appendChild(liveTraining);
        topRow.appendChild(resources);
    }

</script>

<!-- API CALLS FOR MAIN PAGE -->
<script id="api-calls">

    if (location.pathname === '/') {

        try {  // change domain to location.host for production
            getData("https://skilljar-api-test.azurewebsites.net/events/learn.nintex.com?count=4")
                .then(res => addLocalDatesToEvents(res.data))
                .then(events => renderEvents(events))
                .catch(err => console.log(err));
        } catch (error) {
            console.log(`Error getting data from api: ${error}`);
        }

        // // FOR LOCAL DEBUGGING
        // try {
        //     getData("http://127.0.0.1:5000/events/learn.nintex.com?count=4")
        //         .then(res => addLocalDatesToEvents(res.data))
        //         .then(events => renderEvents(events))
        //         .catch(err => console.log(err));
        // } catch (error) {
        //     console.log(`Error getting data from api: ${error}`);
        // }

    }

    // returns the user Skilljar object if logged in, or null otherwise
    function getUser() {
        let user = null;
        try {
            user = skilljarUser;
        } catch (error) {
            console.log("user needs to sign in to see skilljar data.")
        }
        return user;
    }

    async function getData(url) {
        const response = await fetch(url, {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json'
            }
        });
        return await response.json();
    }

    const renderEvents = (events) => {
        const tableRows = document.querySelectorAll('.events-table-row');
        const tableLinks = document.querySelectorAll('.events-table-link');

        // loop through each row to insert values from matching events
        for (let i = 0; i < tableRows.length; i++) {
            // Number table rows should match number of event objects
            const thisRowCols = tableRows[i].children;
            const thisEvent = events[i];

            // each column's text is updated
            thisRowCols[0].innerText = thisEvent.local_starts_at.date;
            thisRowCols[1].innerText = thisEvent.local_starts_at.time;
            thisRowCols[2].innerText = thisEvent.vilt_session.display_name;
            thisRowCols[3].innerText = String(thisEvent.vilt_session.seats_total -
                thisEvent.vilt_session.registration_count) + ' seats';

            // course price with decimals truncated
            const price = thisEvent.vilt_session.lesson.course.price;
            const strPrice = price.substring(0, price.length - 3);
            thisRowCols[4].innerText = `USD $${strPrice}`;

            // URL added to row
            tableRows[i].addEventListener('click', (e) => {
                location = thisEvent.vilt_session.lesson.course.course_url;
            })
        }
        // reveal table and remove spinner
        document.getElementById('events-table').hidden = false;
        document.getElementById('private-training-section').hidden = false;
        document.getElementById('events-loader').remove();
    }

    const addLocalDatesToEvents = (eventsData) => {
        let localDate, localTime;
        try {
            for (const event of eventsData) {
                const dateTime = new Date(event.starts_at);
                // format as Nov 26, 2019
                localDate = dateTime.toDateString().slice(4);
                localDate = localDate.substring(0, 6) + ', ' + localDate.substring(7);
                // format time as 13:00
                localTime = dateTime.toTimeString().slice(0, 5);
                // attach object to each event 
                event['local_starts_at'] = { date: localDate, time: localTime };
            }
        } catch (error) {
            console.log(`Error getting local datetime from events data: ${error}`);
        }
        return eventsData;
    }

</script>

<script>
    // Link to profile page
    const profileLink = document.querySelector('.profile-link');
    if (profileLink) {
        profileLink.addEventListener('click', toProfile);
        profileLink.innerText = "View Progress";
    };

    function toProfile(e) {
        e.preventDefault();
        let reg = /https:\/\/\w*.nintex.com/
        let url = window.location.href
        let urlDomain = url.match(reg)[0]
        let profilePage = `${urlDomain}/accounts/profile/?next=/`
        window.location.assign(profilePage)
    };

    // Insert profile dropdown links
    $('#header-drop li:nth-child(1)').after('<li><a href="https://nintex-it.workflowcloud.com/forms/6e677242-5448-421d-a957-4811fccb0572" target="_blank">Provide Feedback</a></li>');
    $('#header-drop li:nth-child(2)').after('<li><a href= "https://nintex-training.workflowcloud.com/forms/b013dd22-6173-4298-b48f-852ba1bd3a16" target="_blank">Request Content</a></li>');

    // Hide placeholder course
    let course = document.querySelector('a[data-course="wp01-intro-to-nintex"]')
    if (window.location.pathname === '/series/products') {
        course.setAttribute('style', 'display: none')
    }

    // changes start/enroll button for all courses
    const startBtn = document.querySelector('.purchase-button-full-text');
    if (startBtn) startBtn.innerText = 'Enroll';

    // Beamr Config
    const urlArr = window.location.href;
    const checkId = /\d{6}/;

    if (!checkId.test(urlArr)) {
        var beamer_config = {
            product_id: 'rEnQcjEg3705', //DO NOT CHANGE
            button_position: 'bottom-right',
            filter: 'nintexLearn'
        }
    }

</script>

<script type="text/javascript" src="https://app.getbeamer.com/js/beamer-embed.js" defer="defer"></script>

<script>
    // Display "Hello " + Student Name on the homepage
    const greetUser = () => {
        const user = getUser();
        if (user)
            document.getElementById("hero-header").innerHTML = `Hello ${user.firstName}!`;
    }
    if (location.pathname == '/')
        document.addEventListener('DOMContentLoaded', greetUser);

    // adds user email to private training URL params
    const privateLink = document.getElementById('private-training-link')
    if (privateLink && getUser())
        privateLink.href += '?userEmail='.concat(skilljarUser.email);

    // Hides the ribbons of each tile on certification page
    if (window.location.pathname.endsWith('/certifications')) {
        const ribbons = document.querySelectorAll('.sj-course-ribbon-wrapper')
        ribbons.forEach(e => e.style.display = 'none')
    }

    // reads next lesson title from on hover text into button
    const nextBtn = document.querySelector(".next-lesson-button");
    if (nextBtn) {
        const nextLabel = nextBtn.firstElementChild.firstElementChild;
        // change button text first
        document.querySelector(".next-lesson-link").innerText = nextLabel.innerText;
        // change on hover text to 'Next'
        nextLabel.innerText = 'Next lesson';
    }

</script>

<script>
    // legal T&C link and currency additions on purchase page
    const controlPayment = () => {
        // select and hide purchase button onload
        let btnPurchase = document
            .querySelector("#payment-form > div:nth-child(3) > div > button")
        btnPurchase.style.display = 'none'

        // create and append new link to li, and new li to list
        let parentDiv = document.querySelector("#payment-form > div:nth-child(3) > div")
        let newLine = document.createElement('p')
        let legalLink = document.createElement('a')
        parentDiv.prepend(newLine)
        newLine.appendChild(legalLink)
        newLine.style.textAlign = 'center'

        // set link properties and content
        legalLink.innerHTML = 'I agree to Nintex Terms & Conditions'
        legalLink.href = 'https://www.nintex.com/legal/nintex-training-terms-and-conditions/'
        legalLink.target = '_blank'

        // create, prepend, and style checkbox
        let checkbox = document.createElement('input')
        checkbox.type = 'checkbox'
        newLine.prepend(checkbox)
        checkbox.style.width = '1.5rem'
        checkbox.style.height = '1.0rem'

        // listen for checks and display/hide purchase button
        checkbox.addEventListener('change', (e) => {
            if (e.target.checked) {
                btnPurchase.style.display = 'inline-block'
            } else {
                btnPurchase.style.display = 'none'
            }
        })
    }

    // Add USD to unitPrice
    const addCurrencyUnitPrice = () => {
        const unitPrice = document.querySelector(
            "#purchaseReview > div.white-bg.grey-bottom-border > div > div > div:nth-child(3) > div:nth-child(3) > div.item")
        unitPrice.prepend('USD ')
    }

    // Add USD to subPrice and totalPrice
    const addCurrencySubAndTotal = () => {
        const subPrice = document.querySelector("#subtotal")
        const totalPrice = document.querySelector("#total-price")
        subPrice.prepend('USD ')
        totalPrice.prepend('USD ')
    }

    // Adds currency and legal elements on first load
    document.addEventListener("DOMContentLoaded", () => {
        if (window.location.pathname.startsWith('/purchase/')) {
            controlPayment();
            addCurrencyUnitPrice();
            addCurrencySubAndTotal();
        }
    });
</script>


<!-- Enables navbar on subpages -->
<script>
    // navSection is only unhidden in subpages
    const header = document.querySelector('#header');
    const navSection = document.querySelector('#nav-section');

    // edits to subpages if not homepage
    if (location.href != "https://nintex.skilljar.com/") {
        navSection.hidden = false;
        header.appendChild(navSection);
        // remove all search elements and reset searchbar
        const searchBar = document.querySelector('.search-container');
        if (searchBar) searchBar.remove();
    }

</script>

<!-- Functions here are used in subpages -->
<script>
    // used in subpages to add breadcrumbs
    // params: [[crumb1Name, crumb1Link], [crumb2Name, crumb2Link]]
    const addBreadcrumbs = ([...crumbs]) => {
        const homeCrumb = document.querySelector("#breadcrumbs");

        // attach each crumb to home. crumbs are [name, link]
        for (crumb of crumbs) {
            const newCrumb = document.createElement('a');
            newCrumb.innerText = crumb[0];  // name
            newCrumb.classList.add('breadcrumb');
            breadcrumbs.appendChild(newCrumb);
            newCrumb.href = crumb[1];  // link
        }

    }

    // obtains the level of course appends the level text to the card 
    function addDifficulty() {
        const courses = document.querySelectorAll('.course');

        // get the level of each course
        for (course of courses) {
            const level = getLevel(course);

            // if it's a course (has a data-course tag) and has level
            if (course && course.dataset.course && level) {
                // append a new element and style with .level-text class
                const levelElement = document.createElement('div');
                levelElement.classList.add('level-text');
                levelElement.innerText = level;
                course.appendChild(levelElement);
            }
        }
    }

    // removes default elements and styles injected into subpages by Skilljar
    function removeDefaultElements() {
        // remove everything with class .catalog-center-width
        const elements = document.querySelectorAll('.catalog-center-width');
        for (el of elements)
            if (el) el.classList.remove('catalog-center-width');

        // remove back button
        const backBtn = document.querySelector('.back-to-catalog');
        if (backBtn) backBtn.remove();
    }

    // opens all course cards in a new tab
    function openCoursesNewTab() {
        const courses = document.querySelectorAll('.course');
        for (course of courses) 
            course.target = '_blank';
    }


    // GETTING DATA-TAG FROM COURSES - USE IN ONDEMAND PAGES

    // returns the product capability tag found in given course element
    function getCapability(course) {
        const capabilities = [
            "Workflow", "Forms", "Mobile", "Process Mapping", "RPA", "DocGen", "eSign"]

        for (capa of capabilities)
            if (course.tagArray.includes(capa.toLowerCase()))
                return capa;
        return null;
    }

    // returns the level tag found in given course element
    function getLevel(course) {
        const levels = ["Practitioner", "Expert", "Master", "Partner"];

        for (level of levels)
            if (course.tagArray.includes(level.toLowerCase()))
                return level;
        return null;
    }

    // returns the platform tag found in given course element
    function getPlatform(course) {
        const platforms = ["Office-365", "SharePoint", "NWC", "Salesforce"];

        for (platform of platforms)
            if (course.tagArray.includes(platform.toLowerCase()))
                return platform;
        return null;
    }

    // returns the role tag found in given course element
    function getRole(course) {
        const roles = ["Everyday-User", "Process-Author", "Promaster"];

        for (role of roles)
            if (course.tagArray.includes(role.toLowerCase()))
                return role;
        return null;
    }
</script>


<!-- control subscription access to courses via user groups -->
<script>

    // if on a course page
    if (typeof skilljarCourse !== 'undefined') {

    }

    // returns the access level of the user
    function getUserAccessLevel() {

        // if user is logged in
        if (typeof skilljarUserStudentGroups !== 'undefined') {

            // return the subscription access if it exists
            for (group of skilljarUserStudentGroups.values()) {
                if (group.name == "Subscription - Basic"
                    || group.name == "Subscription - Premium") {
                    return group.name;
                }
            }
        }
    }

    // returns the access level of the course
    function getCourseAccessLevel() {
        for (tag.toLowerCase() of skilljarCourse.tags) {
            if (tag == "Subscription - Basic" || tag == "Subscription - Premium")
                return tag;
        }
    }

    // converts button href to onclick event
    function convertBtnToEvent() {
        const purchaseBtn = document.querySelector('.purchase-button');
        if (purchaseBtn) {
            purchaseBtn.onclick = () => {
                location.href = purchaseBtn.href;
            }
            purchaseBtn.href = '#';
        }
    }

</script>


<!-- EVENT HANDLERS - for filters in ondemand subpages -->
<script>

    // resets view by displaying all possible course cards
    function displayCourses() {
        const courseCards = document.querySelectorAll('.course');
        for (card of courseCards) card.style.display = 'block';
    }


    // hides all existing course cards from view
    function hideCourses() {
        const courseCards = document.querySelectorAll('.course');
        for (card of courseCards) card.style.display = 'none';
    }


    // displays all course cards and resets filter controls
    function handleFilterReset(filters) {

        return () => { // returns inner func to event listener

            displayCourses();

            // reset filters to default value
            for (filter of filters) {
                if (filter.tagName === "SELECT")
                    filter.value = 'all';
                else if (filter.tagName === "INPUT")
                    filter.value = '';
            }
        }

    }


    // handles all course filters on all cards 
    // makes all filter elements available to inner anonymous func
    function handleCourseFilters(filters) {

        return () => { // returns inner func to event listener

            // gets an array of all available courses (not just filtered ones)
            const courseCards = document.querySelectorAll('.course');
            let courses = Array.from(courseCards);

            // hides courses before each filtering event - defined in global theme
            hideCourses();

            // pass courses array and filter through all filter functions 
            for (filter of filters) {
                if (filter.tagName === "SELECT")
                    courses = filterCoursesOnSelect(courses, filter);
                else if (filter.tagName === "INPUT")
                    courses = filterCoursesOnSearch(courses, filter);
            }

            // show the remaining filtered courses
            for (course of courses) course.style.display = 'block';
        }
    }


    // filters and returns an array of course elements that match the selected filter
    // handles all types of select filters - must include getter in selectorSwitch
    function filterCoursesOnSelect(courses, select) {

        // returns all courses if 'all' is selected for the given filter
        if (select.value === 'all') return courses;

        // filters out the courses with tags that don't match the selected value
        const filteredCourses = courses.filter(course => {

            // gets tag value of current course by switching on the name of selector
            const selectorSwitch = {
                "level": getLevel(course),
                "capability": getCapability(course),
                "platform": getPlatform(course),
                "role": getRole(course),
            }
            const tag = selectorSwitch[select.name];  // tag is null if course doesn't have it

            // returns the course if it has a matching tag
            if (tag && tag.toLowerCase() === select.value.toLowerCase())
                return course;
        })

        return filteredCourses;
    }


    // filters and returns an array of course elements that match the search input
    function filterCoursesOnSearch(courses, search) {

        // filters out courses with titles that don't include the search input
        const filteredCourses = courses.filter(course => {
            const title = course.title;
            return title.toLowerCase().includes(search.value);
        })

        return filteredCourses;
    }
</script>


<!-- COURSE OVERVIEW/DETAILS PAGE -->
<script>

    document.addEventListener('DOMContentLoaded', () => {
        // render with different class prefix depending on enrollment status

        // not yet enrolled/not signed in 
        if (typeof skilljarCourse !== 'undefined' &&
            typeof skilljarCourseProgress === 'undefined') 
            // class names starting with dp-
            modifyCoursePage("dp");

        // registered/completed
        else if (typeof skilljarCourseProgress !== 'undefined')
            // class names starting with cp-
            modifyCoursePage("cp");
    })


    // MAIN METHOD FOR RENDERING/RESTYLING COURSE PAGE
    // given classPrefix depends on enroll page or registered/completed page
    function modifyCoursePage(classPrefix) {

        // reset headers
        resetHeader();

        // loads the promo image into the background of the banner
        loadPromoImage(classPrefix);

        // MAIN SUMMARY BLOCK
        modifySummary(classPrefix);

        // title
        document.querySelector('.break-word').classList.add('course-page-title');  

        // subtitle elements
        const subtitle = document.querySelector(`.${classPrefix}-summary-wrapper h2`);
        addSubtitleLevel(subtitle);

        // move course duration to banner if provided
        const courseTime = document.querySelector('.sj-course-time')
        if (courseTime && courseTime.innerHTML !== "")
            addCourseTime(classPrefix, subtitle);

        // extra links and buttons
        modifyLinks();

        // progress bar
        modifyProgress();
    }


    // loads promo image into the banner
    function loadPromoImage(classPrefix) {
        const promoImage = document.querySelector(`.${classPrefix}-promo-image > img`);
        const banner = document.querySelector("#skilljar-content > div.top-row-grey.padding-side");

        // set banner background to promo image
        banner.style.background = `linear-gradient(rgba(3, 22, 30, 0.85), rgba(3, 22, 30, .7)), 
        url(${promoImage.src}) right/cover no-repeat`;
        banner.classList.add('course-page-banner');

        // removes promo image along with its container column
        document.querySelector(`.${classPrefix}-promo-image-wrapper`).remove();
    }

    // styles summary block
    function modifySummary(classPrefix) {
        const summary = document.querySelector(`.${classPrefix}-summary-wrapper`);

        // only .course-page-summary is non-skilljar class defined in global theme
        summary.classList.add('course-page-summary', 'large-10');
        summary.classList.remove('push-4');
        summary.parentElement.classList.add('padded-side-bottom');
    }

    // resets navbar and top ribbon
    function resetHeader() {
        // HEADERS
        document.getElementById('header-left').classList.add('course-page-header-left');
        document.getElementById('header-right').classList.add('course-page-header-right');

        // NAV BAR
        document.getElementById('nav-section').remove();
    }

    // adds difficulty level inside subtitle element
    function addSubtitleLevel(subtitle) {
        // clears the subtitle (in case no level is found), then reads in level
        subtitle.innerText = '';

        // getLevel() does not work here, **replace hardcoded levels in future release**
        for (tag of skilljarCourse.tags) {
            // render text and icons if level tag is provided
            if (["Practitioner", "Expert", "Master", "Partner"].includes(tag)) {
                subtitle.innerText = tag;
                addLevelIcons(subtitle, tag);
            }
        }
        subtitle.classList.add('course-page-subtitle');  // defined in theme
        subtitle.classList.remove('cp-lessons');
    }

    // adds difficulty level icons to level text
    function addLevelIcons(levelText, levelTag) {
        // maps levels to number of blocks to be filled
        const levels = { 
            "Practitioner": 1,
            "Expert": 2,
            "Master": 3
        }

        // creates add level container to text
        const levelContainer = document.createElement('div');
        levelContainer.classList.add('course-level-container');
        levelText.appendChild(levelContainer);

        // creates and add level icons to container
        for (let i = 0; i < 3; i++) {
            const levelIcon = document.createElement('span');
            levelIcon.innerHTML = "&nbsp;";
            levelIcon.classList.add('course-level-icon');
            levelContainer.appendChild(levelIcon);
        }

        // fills level icons up to the level on the tag
        for (let i = 0; i < levels[levelTag]; i++) {
            levelContainer.children[i].classList.add('course-level-fill-orange');
        }
    }

    // adds course time before subtitle element
    function addCourseTime(classPrefix, subtitle) {
        // COURSE TIME - reads course time into subtitle
        const oldTime = document.querySelector('.sj-course-time');  // old course time element
        const courseTime = document.createElement('h2');  // new course time element

        subtitle.parentElement.insertBefore(courseTime, subtitle);
        courseTime.innerText = oldTime.innerHTML;
        courseTime.classList.add('course-page-subtitle'); // defined in theme
        
        if (classPrefix === 'dp') courseTime.classList.add('course-page-time'); // defined in theme

        // remove old course time and lesson times
        oldTime.remove();
        const lessonTimes = document.querySelectorAll('.sj-lesson-time');
        for (time of lessonTimes) time.remove();
    }

    // modifies links and buttons
    function modifyLinks() {
        // SIGN IN TEXT
        const signIn = document.querySelector('.signin')
        if (signIn) signIn.remove();

        // ENROLL BUTTON
        const enrollBtn = document.querySelector('.purchase-button');
        if (enrollBtn) enrollBtn.classList.add('course-page-action-btn');  // defined in theme

        const resumeBtn = document.querySelector('.button[title="Resume"]'); 
        if (resumeBtn) {
            resumeBtn.classList.add('course-page-action-btn', 'resume-btn');
            resumeBtn.parentElement.classList.remove('row');
        }       
    }

    // modifies progress bar
    function modifyProgress() {
        // PROGRESS BAR
        const progress = document.querySelector('.progress-bar');
        if (progress) {
            progress.classList.add('course-page-progress');  // defined in theme
            progress.removeAttribute('style');  // remove inline styles
        } 
    }

</script>