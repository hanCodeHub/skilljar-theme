<div>
    <!-- THIS PAGE CONTAINS CARDS LINK TO COURSE SERIES -->
    <!-- div needed for inserting into ondemand series catalog -->
    <div id="header-banner">

        <div class="header-block-wrapper">
            <div id="header-block">
                <div class="header-block-text">
                    <h1 class="section-header">On-demand training. Anytime, anywhere.</h1>
                    <p>
                        Take our comprehensive in-depth training courses from any device to become proficient in the
                        Nintex Platform. After selecting the product that you wish to learn more about, you may select
                        the appropriate course for your needs.
                    </p>
                    <a href="/accounts/profile/?next=/" class="btn-solid">
                        View Progress
                    </a>
                </div>
                <!-- background image on banner -->
                <div class="header-block-graphic"></div>
            </div>
        </div>

    </div>


    <!-- Course series cards on the ondemand page - insert here  -->
    <!-- each card is appended to #catalog-content -->
    <!-- Title and subtitle of each card MUST be updated in Skilljar dashboard as well -->

    <!-- Process Automation -->
    <a href="/series/test-series-process-automation" title="Nintex Process Automation - TEST"
        class="coursebox-container course sj-course-series theme-color-border-hover theme-no-hover" data-type="-c"
        data-tags="" data-order="28" data-oid="" data-coid="" data-course-series="test-series-process-automation">
        <div class="coursebox-image"><img
                src="https://cc.sj-cdn.net/instructor/286gsk1f0uvf6-nintex/course_series/1qbuqeobma082/promo-image.1580921240.png"
                data-src="https://cc.sj-cdn.net/instructor/286gsk1f0uvf6-nintex/course_series/1qbuqeobma082/promo-image.1580921240.png"
                alt="Nintex Process Automation - TEST"></div>
        <div class="coursebox-text">
            Nintex Drawloop DocGen - TEST
        </div>
        <div class="coursebox-text-description">
            Description about Nintex Process Automation courses that help your business.
        </div>
        <div class="storefront-price"><span></span></div>
        <div class="course-series-count">
            4 Courses
        </div>
        <div class="coursebox-tags"></div>
    </a>


    <!-- RPA -->
    <a href="/series/test-series-rpa" title="Nintex RPA - TEST"
        class="coursebox-container course sj-course-series theme-color-border-hover theme-no-hover" data-type="-c"
        data-tags="" data-order="29" data-oid="" data-coid="" data-course-series="test-series-rpa">
        <div class="coursebox-image"><img
                src="https://cc.sj-cdn.net/instructor/286gsk1f0uvf6-nintex/course_series/2e5nyn5vv8jyn/promo-image.1580921367.png"
                data-src="https://cc.sj-cdn.net/instructor/286gsk1f0uvf6-nintex/course_series/2e5nyn5vv8jyn/promo-image.1580921367.png"
                alt="Nintex RPA - TEST"></div>
        <div class="coursebox-text">
            Nintex RPA - TEST
        </div>
        <div class="coursebox-text-description">
            Description about Nintex RPA courses that help your business.
        </div>
        <div class="storefront-price"><span></span></div>
        <div class="course-series-count">
            3 Courses
        </div>
        <div class="coursebox-tags"></div>
    </a>


    <!-- Drawloop -->
    <a href="/series/test-series-drawloop" title="Nintex Drawloop DocGen - TEST"
        class="coursebox-container course sj-course-series theme-color-border-hover theme-no-hover" data-type="-c"
        data-tags="" data-order="30" data-oid="" data-coid="" data-course-series="test-series-drawloop">
        <div class="coursebox-image"><img
                src="https://cc.sj-cdn.net/instructor/286gsk1f0uvf6-nintex/course_series/2end7myk6pk6x/promo-image.1582652936.png"
                data-src="https://cc.sj-cdn.net/instructor/286gsk1f0uvf6-nintex/course_series/2end7myk6pk6x/promo-image.1582652936.png"
                alt="Nintex Drawloop Document Generation - TEST"></div>
        <div class="coursebox-text">
            Nintex Drawloop DocGen - TEST
        </div>
        <div class="coursebox-text-description">
            Description about Nintex Drawloop courses that help your business.
        </div>
        <div class="storefront-price"><span></span></div>
        <div class="course-series-count">
            5 Courses
        </div>
        <div class="coursebox-tags"></div>
    </a>

    <!-- Process Mapping -->
    <a href="/series/test-series-process-mapping" title="Nintex Process Mapping - TEST"
        class="coursebox-container course sj-course-series theme-color-border-hover theme-no-hover" data-type="-c"
        data-tags="" data-order="31" data-oid="" data-coid="" data-course-series="nintex-process-mapping">
        <div class="coursebox-image"><img
                src="https://cc.sj-cdn.net/instructor/286gsk1f0uvf6-nintex/course_series/2lh16q6pu8wcv/promo-image.1581015746.png"
                data-src="https://cc.sj-cdn.net/instructor/286gsk1f0uvf6-nintex/course_series/2lh16q6pu8wcv/promo-image.1581015746.png"
                alt="Nintex Process Mapping - TEST"></div>
        <div class="coursebox-text">
            Nintex Process Mapping - TEST
        </div>
        <div class="coursebox-text-description">
            Description about Nintex Process Mapping courses that help your business.
        </div>
        <div class="storefront-price"><span></span></div>
        <div class="course-series-count">
            4 Courses
        </div>
        <div class="coursebox-tags"></div>
    </a>

</div>


<!-- STYLES -->
<style>
    /* page reset */
    #main-container #skilljar-content {
        margin-left: 0;
        background-color: #fff !important;
    }

    #main-container #skilljar-content .top-row {
        padding: 0;
    }

    #main-container #skilljar-content .catalog-header {
        margin-top: 0;
        padding-left: 0;
    }

    /* hide left nav button - search bar does not work on this page */
    #left-nav-button {
        display: none;
    }

    /* HEADER BANNER BLOCK */
    #main-container #skilljar-content .header-block-wrapper {
        background: url("https://everpath-course-content.s3-accelerate.amazonaws.com/instructor%2Fhan_xu_nintex_com_9jmvc3%2Fpublic%2FOndemand-backg.1580927854336.jpg");
        background-position: center;
        background-size: cover;
    }

    #main-container #skilljar-content #header-block {
        color: #052332;
        margin: auto;
        margin-bottom: 4em;
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        -webkit-box-pack: center;
        -ms-flex-pack: center;
        justify-content: center;
        -webkit-box-orient: horizontal;
        -webkit-box-direction: normal;
        -ms-flex-flow: row nowrap;
        flex-flow: row nowrap;
        max-width: 70%;
    }

    /* header title and paragraph */
    #main-container #skilljar-content h1.section-header {
        font-family: "Montserrat";
        font-weight: 600;
        font-size: 2em;
        margin: 1.5em 0 1em 0;
        color: #052332;
    }

    #main-container #skilljar-content #header-block p {
        font-size: 1.1em;
        font-weight: 400;
        margin-bottom: 2.5em;
    }

    #skilljar-content #header-block .header-block-text {
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        -webkit-box-orient: vertical;
        -webkit-box-direction: normal;
        -ms-flex-flow: column nowrap;
        flex-flow: column nowrap;
        margin: 2.5em 4em 2em 0;
        padding-bottom: 2em;
        color: #052332;
        font-weight: 700;
        letter-spacing: .03em;
    }

    #header-block .header-block-text .btn-outline {
        margin: auto;
    }

    #header-block .header-block-text .btn-outline:hover {
        background-color: #ff6d00;
    }

    .header-block-text .btn-outline a {
        color: #fff;
    }

    #skilljar-content #header-block .header-block-graphic {
        width: 100em;
        background: url("https://everpath-course-content.s3-accelerate.amazonaws.com/instructor%2Fhan_xu_nintex_com_9jmvc3%2Fpublic%2Fondemand-image.1580926582259.jpg");
        background-size: cover;
        background-position: center;
    }

    @media only screen and (max-width: 1150px) {
        #skilljar-content #header-block .header-block-graphic {
            display: none;
        }

        #skilljar-content #header-block .header-block-text {
            margin: 2.5em 0;
        }
    }


    /* SERIES CARDS */
    #catalog-content #catalog-courses {
        width: 70%;
        display: -webkit-box;
        display: -ms-flexbox;
        display: flex;
        -webkit-box-align: center;
        -ms-flex-align: center;
        align-items: center;
        margin: auto;
    }

    #catalog-content #catalog-courses .coursebox-container {
        margin-right: 1.5em;
        margin-bottom: 2em;
        padding-bottom: 1em;
        -webkit-transition: .3s ease;
        -o-transition: .3s ease;
        transition: .3s ease;
    }

    #catalog-content #catalog-courses .coursebox-container:hover {
        -webkit-transform: translateY(-1em);
        -ms-transform: translateY(-1em);
        transform: translateY(-1em);
    }

    #catalog-courses .coursebox-container.course .coursebox-image {
        margin: -8px;
        height: inherit;
        margin-bottom: 1em;
    }

    #catalog-courses .coursebox-container .coursebox-text {
        font-family: 'montserrat', 'sans-serif';
        font-weight: 500;
        font-size: 1.1em;
    }

    #catalog-content #catalog-courses .coursebox-container .coursebox-text-description {
        color: #052332;
        padding-bottom: 1.3em;
    }

    #catalog-courses .coursebox-container .course-series-count {
        color: #ff6d00;
    }

    /* remove stacked effect behind cards */
    #catalog-content #catalog-courses .coursebox-container::before,
    #catalog-content #catalog-courses .coursebox-container::after {
        content: none;
    }
</style>



<!-- MINOR DOM EDITS/RESETS - CUSTOMIZE ON ALL SUBPAGES -->
<script>
    // remove all search elements and reset searchbar
    document.querySelector('.search-container').remove();

    // trigger DOM edits after DOM loaded
    document.addEventListener('DOMContentLoaded', () => {
        addCourseSeries();

        // [name, link] for each breadcrumb - addBreadcrumbs() defined in global theme
        addBreadcrumbs([
            ["On-demand Training", "https://nintex.skilljar.com/series/ondemand"]
        ]);
    });

    // attach all series cards to #catalog-content
    function addCourseSeries() {
        const catalog = document.querySelector('#catalog-courses');
        const allSeries = document.querySelectorAll('.sj-course-series');
        for (series of allSeries) catalog.append(series);
    }

</script>

<!-- API calls to Skilljar API -->
<script>
    
    // main program flow of this script
    try {       // change domain to location.host for production
        getData("https://skilljar-api-test.azurewebsites.net/course-series/nintex.skilljar.com")
            .then(res => res.data)
            .then(data => addCourseCount(data.results))
            .catch(err => console.log(err));
    } catch (error) {
        console.log(`Error getting data from api: ${error}`);
    }

    // generic fetch function
    async function getData(url) {
        const response = await fetch(url, {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json'
            }
        });
        return await response.json();
    }

    // takes an array of course series objects (api) and adds course count to each existing series
    // precondition: course series title attribute in HTML must match the one in Skilljar
    function addCourseCount(apiSeries) {

        // all course series currently on the webpage
        const domSeries = document.querySelectorAll('.sj-course-series');
        
        for (series of domSeries) {
            // find the first occurrence of current series title matching api object title
            const match = apiSeries.find(obj => series.title === obj.title);
            
            // display the published course count on current series
            if (match) {
                const countElement = series.querySelector('.course-series-count');
                countElement.style.display = 'block';
                countElement.innerText = `${match.published_course_count} Courses`;
            }
        }
    }

</script>